(this["webpackJsonpemployees-project"]=this["webpackJsonpemployees-project"]||[]).push([[5],{53:function(e,t,n){"use strict";var a=n(54),r=n.n(a),c=n(55),i=n(56),o=n.n(i),s=n(4),l=o.a.create({baseURL:s.b}),u={getEmployees:function(){return l.get(s.a)},getEmployeeById:function(e){return l.get("".concat(s.d,"/").concat(e))},createComment:function(e,t,n,a){return l.post(s.c,{id:e,label:t,text:n,phone:a})}};n.d(t,"c",function(){return m}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return f});var m=function(e){e(p()),u.getEmployees().then(function(t){var n=t.data,a=n.success;e(a?h(n.data):v(n.message))}).catch(function(t){return e(v(s.e))})},d=function(e,t){return function(n){t?(n(p()),u.getEmployees().then(function(){var t=Object(c.a)(r.a.mark(function t(a){var c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c=a.data,c.success?(n(h(c.data)),n(g()),O(e,n)):n(v(c.message));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){return n(v(s.e))})):(n(g()),O(e,n))}},f=function(e,t,n,a){return function(r){r(y()),u.createComment(e,t,n,a).then(function(c){var i=c.data,o=i.success;r(o?E({id:e,title:t,text:n,phone:a,date:(new Date).getTime()}):F(i.message))}).catch(function(e){return r(F(s.e))})}},p=function(){return{type:s.j}},h=function(e){return{type:s.k,payload:e}},v=function(e){return{type:s.i,payload:e}},g=function(){return{type:s.m}},b=function(e){return{type:s.l,payload:e}},y=function(){return{type:s.g}},E=function(e){return{type:s.h,payload:e}},F=function(e){return{type:s.f,payload:e}},O=function(e,t){u.getEmployeeById(e).then(function(e){var n,a=e.data,r=a.success;t(r?(n=a.data,{type:s.n,payload:n}):b(a.message))}).catch(b(s.e))}},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(48),r=n(49),c=n(51),i=n(50),o=n(52),s=n(0),l=n.n(s),u=n(23),m=n(53),d=n(21),f=(n(85),n(11)),p=function(e){var t=e.title,n=e.imageSrc,a=e.alt,r=e.url,c=e.linkText,i=e.children;return l.a.createElement("div",{className:"col s12"},t&&l.a.createElement("h2",{className:"header"},t),l.a.createElement("div",{className:"card horizontal"},l.a.createElement("div",{className:"card-image"},l.a.createElement("span",null,l.a.createElement(d.a,{src:n,alt:a}))),l.a.createElement("div",{className:"card-stacked"},l.a.createElement("div",{className:"card-content"},i),l.a.createElement("div",{className:"card-action"},l.a.createElement(f.b,{to:r},c)))))};p.defaultProps={url:"/",linkText:"Come back"};var h=p,v=function(e){return e<10?"0"+e:e},g=n(25),b=(n(86),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={isFocused:!1},n.onHandleFocus=function(){n.setState({isFocused:!0})},n.onHandleBlur=function(e){var t=n.props.onChange;e.target.value||n.setState({isFocused:!1}),t(e)},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.label,a=e.size,r=e.name,c=e.withError,i=e.errorText,o=this.state.isFocused;return l.a.createElement("div",{className:"input-field col s".concat(a)},l.a.createElement("input",{type:t,id:r,onFocus:this.onHandleFocus,onBlur:this.onHandleBlur,name:r}),l.a.createElement("label",{htmlFor:r,className:o?"active":""},n),c&&l.a.createElement("span",{className:"form-error-message"},i))}}]),t}(s.PureComponent));b.defaultProps={type:"text",size:6,onChange:function(){},name:""};var y=b,E=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={isFocused:!1},n.onHandleFocus=function(){n.setState({isFocused:!0})},n.onHandleBlur=function(e){var t=n.props.onChange;e.target.value||n.setState({isFocused:!1}),t(e)},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.size,a=e.name,r=e.withError,c=e.errorText,i=this.state.isFocused;return l.a.createElement("div",{className:"input-field col s".concat(n)},l.a.createElement("textarea",{id:a,onFocus:this.onHandleFocus,className:"materialize-textarea",onBlur:this.onHandleBlur,name:a}),l.a.createElement("label",{htmlFor:a,className:i?"active":""},t),r&&l.a.createElement("span",{className:"form-error-message"},c))}}]),t}(s.PureComponent);E.defaultProps={size:6,value:"",onChange:function(){},name:""};var F=E,O=n(4);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach(function(t){Object(g.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={isValidForm:!1,title:"",text:"",phone:"",isValidFields:{title:!1,text:!1,phone:!1},errorMessages:{title:"",text:"",phone:""},rules:{title:{required:!0,minLength:5,maxLength:80},text:{required:!0,maxLength:128},phone:{required:!0,match:/^((\+7|7|8)+([0-9]){10})$/}}},n.onHandleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(function(e){var t=k({},e);return t[a]=r,t},function(){return n.checkValidField(a)})},n.checkValidField=function(e){var t=n.state[e],a=n.state.rules[e],r=function(r){if(r===O.w){if(!t)return n.setState(function(t){var n=k({},t);return n.errorMessages[e]=O.v,n["".concat(e,"Valid")]=!1,n.isValidFields[e]=!1,n},function(){return n.checkValidForm()}),{v:!1}}else if(r===O.u){if(t.length<a[r])return n.setState(function(t){var n=k({},t);return n.errorMessages[e]="".concat(O.t," ").concat(a[r]," symbols"),n.isValidFields[e]=!1,n},function(){return n.checkValidForm()}),{v:!1}}else if(r===O.s){if(t.length>a[r])return n.setState(function(t){var n=k({},t);return n.errorMessages[e]="".concat(O.r," ").concat(a[r]," symbols"),n.isValidFields[e]=!1,n},function(){return n.checkValidForm()}),{v:!1}}else if(r===O.p){if(!a[r].test(t))return n.setState(function(t){var n=k({},t);return n.errorMessages[e]="".concat(O.q," 0-9, '-', '+', '(', ')'"),n.isValidFields[e]=!1,n},function(){return n.checkValidForm()}),{v:!1}}};for(var c in a){var i=r(c);if("object"===typeof i)return i.v}n.setState(function(t){var n=k({},t);return n.isValidFields[e]=!0,n.errorMessages[e]="",n},function(){return n.checkValidForm()})},n.checkValidForm=function(){var e=n.state.isValidFields;for(var t in e)if(!e[t])return n.setState(function(e){return k({},e,{isValidForm:!1})}),!1;n.setState(function(e){return k({},e,{isValidForm:!0})})},n.onHandleSubmit=function(e){var t=n.props,a=t.submitHandler,r=t.id,c=n.state,i=c.title,o=c.text,s=c.phone;e.preventDefault(),a(r,i,o,s)},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isValidForm,n=e.errorMessages;return l.a.createElement("form",{onSubmit:this.onHandleSubmit},l.a.createElement(y,{label:"title",size:12,onChange:this.onHandleChange,name:"title",withError:!0,errorText:n.title}),l.a.createElement(F,{label:"Text",size:12,onChange:this.onHandleChange,name:"text",withError:!0,errorText:n.text}),l.a.createElement(y,{label:"Phone",size:12,onChange:this.onHandleChange,name:"phone",withError:!0,errorText:n.phone}),l.a.createElement("button",{className:"btn waves-effect waves-light",disabled:!t},"Submit"))}}]),t}(s.Component),w=(n(87),n(22)),x=n.n(w),C=function(e){var t=e.position,n=e.clickFunction,a=x()("slider-nav-btn",{"slider-nav-btn-left":"left"===t,"slider-nav-btn-right":"right"===t});return l.a.createElement(l.a.Fragment,null,"left"===t?l.a.createElement("button",{className:a,onClick:n},"\u2039"):l.a.createElement("button",{className:a,onClick:n},"\u203a"))},S=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={activeIndex:5},n.navBtnHandleClick=function(e){var t=n.props.data,a=n.state.activeIndex+e;-1===a?a=t.length-1:a===t.length&&(a=0),n.setState({activeIndex:a})},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.renderFunction,r=t.withNavButtons,c=this.state.activeIndex;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("div",{className:"slider-main"},r&&l.a.createElement(C,{position:"left",clickFunction:function(){return e.navBtnHandleClick(-1)}}),l.a.createElement("div",{className:"cards-slider"},l.a.createElement("div",{className:"cards-slider-wrapper",style:{transform:"translateX(-".concat(c*(100/n.length),"%)")}},a(c,n))),r&&l.a.createElement(C,{position:"right",clickFunction:function(){return e.navBtnHandleClick(1)}}))))}}]),t}(s.PureComponent),H=function(e){var t=e.classes,n=e.item,a=n.id,r=n.imageUrl,c=n.firstName,i=n.lastName,o=n.position;return l.a.createElement("div",{className:t},l.a.createElement(f.b,{to:"".concat(O.d,"/").concat(a)},l.a.createElement("img",{src:r,alt:"".concat(c," ").concat(i," - ").concat(o)})))},V=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).renderFunctionForSlider=function(e,t){return l.a.createElement(l.a.Fragment,null,t.map(function(t,n){var a=x()("slide",{active:n===e});return l.a.createElement(H,{key:n,classes:a,item:t})}))},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"getEmployeeId",value:function(){var e=this.props.location.pathname;return Number(e.split("/")[2])}},{key:"componentDidMount",value:function(){var e=this.props,t=e.employees,n=e.getEmployeeById,a=this.getEmployeeId();t.items.length?(t.items.find(function(e){return e.id===a})||n(a,!0),n(a,!1)):n(a,!0)}},{key:"render",value:function(){var e=this.props,t=e.employees,n=e.createComment,a=this.getEmployeeId(),r=t.items.find(function(e){return e.id===a})||{},c=r.imageUrl,i=void 0===c?"":c,o=r.firstName,s=void 0===o?"":o,u=r.lastName,m=void 0===u?"":u,d=r.position,f=void 0===d?"":d,p=r.address,g=void 0===p?"":p,b=r.comments,y=(void 0===b?[]:b).sort(function(e,t){return t.date-e.date}).slice(0,5);return l.a.createElement("main",{className:"container layout"},l.a.createElement(S,{data:t.items,renderFunction:this.renderFunctionForSlider,withNavButtons:!0}),0!==Object.keys(r).length&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement(h,{imageSrc:i,alt:"".concat(s," ").concat(m," - ").concat(f)},l.a.createElement("h4",null,s," ",m),l.a.createElement("div",null,"Position: ",l.a.createElement("span",null,f)),l.a.createElement("div",null,"Address: ",l.a.createElement("span",null,g)),l.a.createElement("div",{className:"divider"}),l.a.createElement("div",null,"Latest comments:"),y.map(function(e){var t=e.title,n=e.text,a=e.date;return l.a.createElement("blockquote",{key:"".concat(a).concat(Math.random())},l.a.createElement("time",{dateTime:a},function(e){var t=new Date(Number(e)),n=t.getFullYear(),a=t.getMonth(),r=t.getDate(),c=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return"".concat(v(r),".").concat(v(a),".").concat(n," ").concat(v(c),":").concat(v(i),":").concat(v(o))}(a)),l.a.createElement("div",null,l.a.createElement("em",null,t)),l.a.createElement("p",null,n))}))),l.a.createElement("div",{className:"row"},l.a.createElement(N,{submitHandler:n,id:a}))))}}]),t}(s.PureComponent);t.default=Object(u.b)(function(e){return{employees:e.employees}},function(e){return{getEmployees:function(){return e(m.c)},getEmployeeById:function(t,n){return e(Object(m.b)(t,n))},createComment:function(t,n,a,r){return e(Object(m.a)(t,n,a,r))}}})(V)}}]);
//# sourceMappingURL=5.037edc6e.chunk.js.map